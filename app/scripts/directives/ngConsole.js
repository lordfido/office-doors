var dev=!1,version="1.2.2";officeDoors.directive("ngConsole",["$rootScope",function(e){return{restrict:"AE",transclude:!0,template:'<style>ng-console{position:relative;display:inline-block;width:100%;height:auto;padding:0px;margin:0px;} .console,.console *{left:0;box-sizing:border-box;margin:0}.console{position:relative;display:inline-block;float:left;width:100%;min-height:300px;padding:10px;top:0;background-color:rgba(0,0,0,1);border:0;outline:0;overflow-x:hidden;overflow-y:scroll;transition:all .3s;z-index:50}.console.fixed{position:fixed;display:block;height:50%;top:-50%;background:rgba(0,0,0,0.8);}.console.fixed.fullscreen{height:100%!important;top:-100%!important}.console.fixed.fullscreen.open,.console.fixed.open,.console.open{top:0!important}.console *{padding:0;top:0;color:#ccc;font-family:monospace;font-size:11px;line-height:16px;list-style:none;text-align:left}.console input::-webkit-calendar-picker-indicator{display:none}.console .command-list .prefix,.console .command-list input[type=text],.console .command-list p,.console .new-line .prefix,.console .new-line input[type=text],.console .new-line p{position:relative;display:block;float:left;width:100%;height:auto;padding:0;margin:0;bottom:0;color:#ccc;font-family:monospace;font-size:11px;line-height:16px;text-align:left;appearance:none;-moz-appearance:none;-webkit-appearance:none;background-color:transparent;border:none;outline:0}.console .command-list, .console .new-line{position: relative;display: block;float: left;width: 100%;}.console .new-line .prefix{width:auto}.console .new-line input[type=text]{width:100%;max-width:calc(100% - 130px);padding:0 5px}</style><form name="console" role="form" novalidate class="console" ng-class="{\'open\': open, \'fixed\': fixed, \'fullscreen\': fullscreen}" ng-submit="executeCommand()"><!-- Command list --><div class="command-list"></div><div class="new-line"><span class="prefix">{{ customPrefix }}</span><input type="text" name="command" ng-model="command" tab-index="1" autofocus autocomplete="off" /><datalist id="commands"><option ng-repeat="command in commands" value="{{ command.name }}"></datalist></div></form>',scope:{open:"=open",fixed:"=fixed",fullscreen:"=fullscreen",customHeight:"=customHeight",customPrefix:"=customPrefix",customCommands:"=customCommands"},link:function(e,o,n){function t(e,o,n,t){this.name=e,this.description="&nbsp;&nbsp;<span style='color: white;'>"+e+"</span>: "+o,this.params=n,this.exec=t}e.init=function(){if(e.customHeight&&!e.fullscreen&&(document.querySelector(".console").style.height=e.customHeight,e.fixed&&(document.querySelector(".console").style.top=-1*e.customHeight)),e.customPrefix||(e.customPrefix="ngConsole"),e.customPrefix+=">",e.commands={},e.commands.browser=new t("browser","Some actions related to the browser.",[{name:"info",description:"Show the the version of the browser you are using."}],function(e,o){o&&o.info&&(e(navigator.userAgent),e("<br />"))}),e.commands.clear=new t("clear","Clean command history.",!1,function(e,o){document.querySelector(".command-list").innerHTML=""}),e.commands.cls=new t("cls","Clean command history.",!1,e.commands.clear.exec),e.commands.console=new t("console","Some actions related to ngConsole",[{name:"bg",description:"Change the ngConsole's background."},{name:"info",description:"Display info about ngConsole."},{name:"reset",description:"Restore ngConsole's state to its initial state."}],function(o,n){n&&(n.bg&&(document.querySelector(".console").style.background=n.bg),n.info&&(o("<b><span style='color: white'>ngConsole v"+version+"</span></b>"),o("<b><span style='color: white'>Author</span></b>: ImperdibleSoft (<a href='http://www.imperdiblesoft.com' target='_blank'>http://www.imperdiblesoft.com</a>)"),o("<b><span style='color: white'>Repository</span></b>: <a href='https://github.com/ImperdibleSoft/ngConsole' target='_blank'>https://github.com/ImperdibleSoft/ngConsole</a>"),o("<br />")),n.reset&&(e.fixed?document.querySelector(".console").style.background="rgba(0, 0, 0, 0.8)":document.querySelector(".console").style.background="rgba(0, 0, 0, 1)",e.executeCommand("clear"),e.executeCommand("console --info",!0),e.open=!1,e.apply()))}),e.commands.exit=new t("exit","Close the console.",!1,function(o,n){e.commands.clear.exec(),e.toggle()}),e.commands.help=new t("help","Show all available commands.",!1,function(o,n){var t="<p>Available commands: ";t+="<ul>";for(var i in e.commands){var l=e.commands[i];if(t+="<li>",t+=l.description,l.params){t+="<ul>";for(var a in l.params){var c=l.params[a];t+="<li>",t+="&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: white'>--"+c.name+"</span>: "+c.description,t+="</li>"}t+="</ul>"}t+="</li>"}t+="</ul>",o(t)}),e.customCommands)for(var o in e.customCommands){var n=e.customCommands[o];e.commands[n.name]=new t(n.name,n.description,n.params,n.action)}e.executeCommand("console --info",!0)},e.toggle=function(){e.open=!e.open,e.open===!0?(e.scrollBottom(),document.querySelector(".console .new-line input")&&document.querySelector(".console .new-line input").focus()):document.querySelector(".console .new-line input")&&(document.querySelector(".console .new-line input").blur(),e.cleanLn()),e.apply()},e.printLn=function(e){var o=document.querySelector(".console .command-list").innerHTML;document.querySelector(".console .command-list").innerHTML=o+"<p>"+e+"</p>"},e.cleanLn=function(){e.command=""},e.scrollBottom=function(){var e=document.querySelector(".console"),o=document.querySelector(".command-list").clientHeight+document.querySelector(".new-line").clientHeight;e.scrollTop=o},e.apply=function(){dev&&dev!==!0||e.$apply()},e.executeCommand=function(o,n){if(o&&""!=o)var t=o;else var t=e.console.command.$modelValue?e.console.command.$modelValue:"";e.cleanLn(),n||e.printLn(e.customPrefix+" <span style='color: white;'>"+t+"</span>");var i=!1;for(var l in e.commands){var a=e.commands[l];if(t.indexOf(" --")>=0&&t.substr(0,t.indexOf(" --"))===a.name||t.indexOf(" --")<0&&t===a.name){if(i=!0,t.indexOf(" --")>=0){var c=t.split(" --"),s={};for(var r in c)if(0!=r){var m=c[r].split("="),p={name:m[0],value:m[1]&&""!=m[1]?m[1].replaceAll('"',""):!0};for(var d in a.params)p.name===a.params[d].name&&(s[p.name]=p.value)}a.exec(e.printLn,s)}else a.exec(e.printLn);break}}i||(""!=t&&t?e.printLn("'<b><span style='color: white;'>"+t+"</span></b>': command not found. Use 'help' for more info."):e.printLn("")),e.scrollBottom()},String.prototype.replaceAll=function(e,o){var n=this;return n.replace(new RegExp(e,"g"),o)},document.addEventListener("keyup",function(o){220==o.keyCode||"ยบ"==o.key?(o.preventDefault(),e.toggle()):(27==o.keyCode||"Escape"==o.key)&&(o.preventDefault(),""!=e.command?e.cleanLn():1==e.fixed&&1==e.open&&e.toggle(),e.apply())}),e.init()}}}]);
